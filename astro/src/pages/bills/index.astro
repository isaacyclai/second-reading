---
import Layout from "../../layouts/Layout.astro";
import SectionLabel from "../../components/SectionLabel.astro";
import BillCard from "../../components/BillCard.astro";
import Pagination from "../../components/Pagination.astro";
import { getBills, getBillCount } from "../../lib/db";

const bills = getBills();
const totalCount = getBillCount();
---

<Layout title="Bills" description="Browse Singapore Parliament bills">
    <SectionLabel>Legislation</SectionLabel>

    <h1 class="font-display text-display-lg text-ink mb-4">
        Bills Before Parliament
    </h1>

    <p
        class="font-body text-base text-ink-soft leading-relaxed max-w-[58ch] mb-8"
    >
        Bills are proposed laws that are debated, amended, and voted on in
        Parliament. Track their progress from first reading through to passage.
    </p>

    <p class="font-sans text-sm text-ink-muted mb-6">
        Showing {bills.length} of {totalCount} bills
    </p>

    <div id="bills-list" class="flex flex-col border-t border-border">
        {
            bills.length === 0 ? (
                <p class="py-12 text-center font-body text-ink-muted">
                    No bills found
                </p>
            ) : (
                bills.map((bill, i) => (
                    <div
                        class="bill-item animate-fade-up"
                        style={`animation-delay: ${0.1 + i * 0.06}s`}
                    >
                        <BillCard bill={bill} />
                    </div>
                ))
            )
        }
    </div>

    <Pagination
        containerId="bills-list"
        itemSelector=".bill-item"
        itemsPerPage={24}
    />
</Layout>
